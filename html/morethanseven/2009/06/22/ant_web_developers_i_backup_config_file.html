<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>Ant for Web Developers I - Backup Config File</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='ant, apache' name='keywords' />
    <link href='/assets/css/reset.css' rel='stylesheet' type='text/css' />
    <link href='/assets/css/style.css' media='screen' rel='stylesheet' type='text/css' />
    <link href='/assets/css/code.css' rel='stylesheet' type='text/css' />
  </head>
  <body>
    <div id='main'>
      <div id='header'>
        <div class='logo'>
          <a href='/'>&laquo; morethanseven</a>
        </div>
        <div id='nav'>
          <ul>
            <li><a href='/about.html'>about</a></li>
            <li><a href='/archives.html'>archives</a></li>
            <li><a href='/tags.html'>tags</a></li>
            <li>
              <a href='/atom.xml'>rss</a>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='article'>
        <h1>
          Ant for Web Developers I - Backup Config File
        </h1>
        <div class='meta'>
          <ul class='tags'>
            <li>Jun 22, 2009</li>
            <li>&middot;</li>
            <li>
              <a class='tag' href='/tags/ant/'>
                ant
              </a>
            </li>
            <li>
              <a class='tag' href='/tags/apache/'>
                apache
              </a>
            </li>
          </ul>
        </div>
        <div class='body'>
          <p>I occasionally get <a href="http://morethanseven.net/2009/01/24/defence-apache-ant/">carried away</a> with <a href="http://ant.apache.org/">Apache Ant</a>. For those that haven&#8217;t come across it, Ant is a build tool written in Java, using an <span class="caps">XML</span> syntax to describe a series of repeatable tasks. In your typical web standards savvy, dynamic language favouring, web developer types that description is probably all they (think they) need to know. It&#8217;s Java. It&#8217;s <span class="caps">XML</span>. It&#8217;s only really useful in the context of building software (dull).</p>
          <p>But I think Ant is a particularly handy tool to have around for anyone working on even simple websites. A couple of strong use cases come to mind:</p>
          <ul>
          	<li>If you&#8217;re working in a team environment then build files are hugely useful when introducing new people to the team, or when moving people around. Getting code up and running at the start of a project, or if you join the team part way through, can be tricky. A well written build file can automate this.</li>
          	<li>Even when working on projects on my own I tend to write simple build files. The main reason is so I don&#8217;t forget how to do something. How do you deploy this particular site? How do you run the test suite or generate the documentation? Build files can encapsulate this, and rather than documentation that might be out of date the build file will be executed to do that job in question.</li>
          </ul>
          <p>So with all that in mind I&#8217;m going to try and do a series of posts each covering a single task, aiming to cover things that your regular web developer will find useful. With that in mind if anyone has any requests or questions let me know either by email or in the comments.</p>
          <p>Out first task lets us backup a file from our remote web server, in this case it&#8217;s the apache2.conf file used to setup apache. Obviously it could be any file you want to get hold of. The example below has a couple of properties for the username and hostname of the remote machine. Save the following snippet into a file called build.xml and place it anywhere you like on your machine.</p>
          <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;project name="example" basedir="."&gt;&#x000A;&lt;property name="username" value="{user}"/&gt;&#x000A;&lt;property name="host" value="{host}"/&gt;&#x000A;&lt;target name="backup-apacheconf" description="backup apache2.conf file from a remote server"&gt;&#x000A;  &lt;exec executable="scp" dir="." failonerror="true"&gt;&#x000A;    &lt;arg value="${username}@${host}:/etc/apache2/apache2.conf"/&gt;&#x000A;    &lt;arg value="apache2.conf"/&gt;&#x000A;  &lt;/exec&gt;&#x000A;&lt;/target&gt;&#x000A;&lt;/project&gt;</pre>
          <p>Running the task, once you have ant installed (it comes already installed on OS X and is generally available in whatever linux package management system you prefer), is as simple as typing the following into a console.</p>
          <pre>ant backup-apacheconf</pre>
          <p>This should download the apache2.conf file to you local machine, into the same directory as your build file.</p>
          <p>The above task requires that you have scp installed on your machine, which is pretty likely if you&#8217;re using OS X or Linux. Ant comes with an inbuilt <em>scp</em> task, but it requires you to install a separate java library. If you&#8217;re happy doing that then you can write tasks like:</p>
          <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;project name="example" basedir="."&gt;&#x000A;&lt;property name="username" value="{user}"/&gt;&#x000A;&lt;property name="password" value="{password}"/&gt;&#x000A;&lt;target name="backup-apacheconf" description="backup apache2.conf file from a remote server"&gt;&#x000A;    &lt;scp file="${username}@${host}:/etc/apache2/apache2.conf" todir="." password="${password}"/&gt;&#x000A;&lt;/target&gt;&#x000A;&lt;/project&gt;</pre>
        </div>
      </div>
      <div id='other-articles'>
        <div class='older'>
          <ul>
            <li>
              <h3>
                <a href='/2009/06/17/less_css.html' title=''>
                  &laquo; Less CSS
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2009/06/11/message_queues_cambridge_geek_night.html' title=''>
                  &laquo; Message Queues at Cambridge Geek Night
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2009/06/10/how_decide_your_next_programming_language.html' title=''>
                  &laquo; How to Decide on Your Next Programming Language
                </a>
              </h3>
            </li>
          </ul>
        </div>
        <div class='newer'>
          <ul>
            <li>
              <h3>
                <a href='/2009/06/23/ant_web_developers_ii_restart_apache.html' title=''>
                  Ant for Web Developers II - Restart Apache &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2009/06/24/urltest_pypi.html' title=''>
                  Urltest on PyPi &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2009/07/01/pants_python_code.html' title=''>
                  Pants Python Code &raquo;
                </a>
              </h3>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='clear'></div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        try {
          var pageTracker = _gat._getTracker("UA-435455-1");
          pageTracker._setDomainName(".morethanseven.net");
          pageTracker._setAllowHash(false);
          pageTracker._trackPageview();
        } catch(err) {}
      //]]>
    </script>
  </body>
</html>
