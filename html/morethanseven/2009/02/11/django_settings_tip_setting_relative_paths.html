<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>Django Settings Tip - Setting Relative Paths</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='django, settings' name='keywords' />
    <link href='/assets/css/reset.css' rel='stylesheet' type='text/css' />
    <link href='/assets/css/style.css' media='screen' rel='stylesheet' type='text/css' />
    <link href='/assets/css/code.css' rel='stylesheet' type='text/css' />
  </head>
  <body>
    <div id='main'>
      <div id='header'>
        <div class='logo'>
          <a href='/'>&laquo; morethanseven</a>
        </div>
        <div id='nav'>
          <ul>
            <li><a href='/about.html'>about</a></li>
            <li><a href='/archives.html'>archives</a></li>
            <li><a href='/tags.html'>tags</a></li>
            <li>
              <a href='/atom.xml'>rss</a>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='article'>
        <h1>
          Django Settings Tip - Setting Relative Paths
        </h1>
        <div class='meta'>
          <ul class='tags'>
            <li>Feb 11, 2009</li>
            <li>&middot;</li>
            <li>
              <a class='tag' href='/tags/django/'>
                django
              </a>
            </li>
            <li>
              <a class='tag' href='/tags/settings/'>
                settings
              </a>
            </li>
          </ul>
        </div>
        <div class='body'>
          <p>Django settings files are pretty interesting. Rather than being written in some sort of purely declarative markup they just use Python. This brings both lots of power as well as the ability to do things in the settings file that you probably shouldn&#8217;t do.</p>
          <p>One area where I find this capability particularly useful is when specifying file system paths. Lots of the settings concern where Django can find templates, images, or stylesheets for instance. The examples given in the default settings file are all of the form <em>/this/directory/structure/</em>. If you plan on only working on your own, and never running your applications anywhere except your local machine this is probably fine. The moment you want to deploy your application, or want to collaborate with others this becomes a problem. You either have to agree upon a fixed directory structure between all developers (annoying) or have distinct settings files for each machine, which probably means them being outside source control (also annoying).</p>
          <p>A better approach is to have those paths dynamically ascertained at runtime. It makes the application much more portable, making local development and production use easier. Using the standard library <em>os</em> module we can do just that.</p>
          <pre>import os&#x000A;import django&#x000A;# calculated paths for django and the site&#x000A;# used as starting points for various other paths&#x000A;DJANGO_ROOT = os.path.dirname(os.path.realpath(django.__file__))&#x000A;SITE_ROOT = os.path.dirname(os.path.realpath(__file__))</pre>
          <p>Here we set a couple of useful constants, one is the path to the site folder and the other the path to where django is stored on this machine. settings.py contains a number of places where these constants are useful. For instance the MEDIA_ROOT settings which specifies the file system location for assets like images or stylesheets. The default settings file even comes with an instruction and example showing a non portable path.</p>
          <pre># Absolute path to the directory that holds media.&#x000A;# Example: "/home/media/media.lawrence.com/"&#x000A;MEDIA_ROOT = os.path.join(SITE_ROOT, 'assets')</pre>
          <p>Other examples include setting the path for a SQLite database:</p>
          <pre>DATABASE_ENGINE = 'sqlite3'&#x000A;DATABASE_NAME = os.path.join(SITE_ROOT, 'db') + '/development.db'</pre>
          <p>Or specifying directories in which we can place templates.</p>
          <pre>TEMPLATE_DIRS = (&#x000A;    os.path.join(SITE_ROOT, 'templates')&#x000A;)</pre>
          <p>I actually think this should probably make it&#8217;s way into the default settings file. I might very well be missing something but I can&#8217;t see when it&#8217;s not much better to do things this way.</p>
        </div>
      </div>
      <div id='other-articles'>
        <div class='older'>
          <ul>
            <li>
              <h3>
                <a href='/2009/02/10/append_slashes_urls_django.html' title=''>
                  &laquo; Append slashes to URLs in Django
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2009/02/07/xmpp_and_offline_processing_coming_google_app_engi.html' title=''>
                  &laquo; XMPP and offline processing coming to Google App Engine
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2009/02/07/pdb_and_appengine.html' title=''>
                  &laquo; PDB and AppEngine
                </a>
              </h3>
            </li>
          </ul>
        </div>
        <div class='newer'>
          <ul>
            <li>
              <h3>
                <a href='/2009/02/15/let_you_sys_admin_override_your_django_settings.html' title=''>
                  Let you Sys Admin Override your Django Settings &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2009/02/15/looking_new_job_june.html' title=''>
                  Looking for a New Job in June &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2009/02/18/python_rest_client.html' title=''>
                  Python REST Client &raquo;
                </a>
              </h3>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='clear'></div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        try {
          var pageTracker = _gat._getTracker("UA-435455-1");
          pageTracker._setDomainName(".morethanseven.net");
          pageTracker._setAllowHash(false);
          pageTracker._trackPageview();
        } catch(err) {}
      //]]>
    </script>
  </body>
</html>
