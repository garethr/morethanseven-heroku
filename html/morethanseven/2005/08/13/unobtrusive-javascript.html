<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>unobtrusive javascript</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='' name='keywords' />
    <meta content='etkmKMftqAyYJM6-DP_TTKJjV0EHM5vbVcaOloSo8Z8' name='google-site-verification' />
    <link href='/assets/css/reset.css' rel='stylesheet' type='text/css' />
    <link href='/assets/css/style.css' media='screen' rel='stylesheet' type='text/css' />
    <link href='/assets/css/code.css' rel='stylesheet' type='text/css' />
    <link href='http://www.myopenid.com/server' rel='openid.server' />
    <link href='http://garethr.myopenid.com/' rel='openid.delegate' />
    <link href='/articles.atom' rel='alternate' title='Morethanseven Atom Feed' type='application/atom+xml' />
  </head>
  <body>
    <div id='main'>
      <div id='header'>
        <div class='logo'>
          <a href='/'>&laquo; morethanseven</a>
        </div>
        <div id='carbonads-container'>
          <div class='carbonad'>
            <div id='carbon'></div>
            <script type='text/javascript'>
              //<![CDATA[
                var z = document.createElement("script");
                z.type = "text/javascript";
                z.async = true;
                z.src = "http://engine.carbonads.com/z/12119/carbon_2_1_0_HORIZ";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(z, s);
              //]]>
            </script>
          </div>
        </div>
        <div id='nav'>
          <ul>
            <li><a href='/about.html'>about</a></li>
            <li><a href='/archives.html'>archives</a></li>
            <li><a href='/tags.html'>tags</a></li>
            <li>
              <a href='/articles.atom'>rss</a>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='article'>
        <h1>
          unobtrusive javascript
        </h1>
        <div class='meta'>
          <ul class='tags'>
            <li>Aug 13, 2005</li>
            <li>
              &middot;
            </li>
            <li>
              <a href='/2005/08/13/unobtrusive-javascript.html#disqus_thread'></a>
            </li>
            <li>&middot;</li>
          </ul>
        </div>
        <div class='body'>
          <p>Lots of talk around at the moment about <a href="http://adactio.com/atmedia2005/">unobtrusive</a>  <a href="http://www.bobbyvandersluis.com/articles/goodpractices.php">javascript</a> on the usual websites and <a href="http://designersinhouse.com">discussion</a> <a href="http://www.quirksmode.org/dom/list.html ">lists</a>. However alot of people, maybe outside the inner circles, are still finding old school examples of inline code on out of date pages.</p>
           <p>So here&#8217;s my tuppence. I guess the more websites that post new, up to date, examples and reasoning the better?</p>
           <p>The premise is pretty simple. In the same way as controlling formating with tables and having everything being mixed up in one .htm file is frowned upon as simply being too much work &#8211; dealing with lots of inline snippets of javascript raises the same problems. Namely being time consuming to update and maintain.</p>
           <p>The solution is to keep <span class="caps">ALL</span> your javascript in separate .js files, and that includes removing things like <code>href="javascript:"</code> or <code>onclick=</code>. The first question is therefor how &#8211; when I started looking down this route I found a simple answer hard to come by, having to look at more complex examples and reverse engineer them.</p>
           <p>The following is the method I&#8217;m using at the moment. It may have issues I&#8217;m unaware &#8211; if your a javascript guru let me know. The examples are from the fluidflash page on this site, see it in action at <a href="http://www.morethanseven.net/fluidflash">www.morethanseven.net/fluidflash</a></p>
           <p>We first I set up an initialisation function:</p>
          
          
          <pre><code>&#x000A;function init() {&#x000A;    if (!document.getElementById) return false;&#x000A;&#x000A;    liquid = document.getElementById("iNavLiquid");&#x000A;&#x000A;    liquid.onclick = liquidChangeClass;&#x000A;}&#x000A;</code></pre>
           <p>This sets the onclick event on the element with the id <code>iNavLiquid</code> that will trigger the function <code>liquidChangeClass</code>. Next we define that function:</p>
          
          
          <pre><code>&#x000A;function changeClass( targetId, newClass ) {&#x000A;    if (document.getElementById){&#x000A;        target = document.getElementById( targetId );&#x000A;        target.className = newClass;&#x000A;    }&#x000A;}&#x000A;&#x000A;function liquidChangeClass() {&#x000A;    changeClass("iBody","liquid");&#x000A;}&#x000A;</code></pre>
           <p>The specifics aren&#8217;t too important to this example but you can see the <code>liquidChangeClass</code> function which is triggered by the onclick event handler.</p>
           <p>And finally we need to trigger the <code>init</code> function when the page loads. Their are lots of ways of doing this which is probably a conversation for another time &#8211; I used a <code>schedule</code> function from <a href="http://themaninblue.com">themaninblue.com</a> which you can find below:</p>
          
          
          <pre><code>&#x000A;function schedule(objectID, functionCall, iteration) {&#x000A;   if (iteration == null){&#x000A;   iteration = 0;&#x000A;   }&#x000A;&#x000A;   if (objectID == "window") {&#x000A;   var oldonload = window.onload;&#x000A;&#x000A;   if (typeof window.onload != "function") {&#x000A;   window.onload = functionCall;&#x000A;   } else {&#x000A;   window.onload = function() {&#x000A;   oldonload();&#x000A;   functionCall();&#x000A;   }&#x000A;   }&#x000A;   } else if (document.getElementById(objectID)) {&#x000A;   functionCall();&#x000A;   } else if (iteration &amp;lt; 300) {&#x000A;   setTimeout(function(){schedule(objectID, &#x000A;           functionCall, iteration + 1)}, 10);&#x000A;   }&#x000A;&#x000A;   return true;&#x000A;}  &#x000A;&#x000A;schedule("window", init);&#x000A;</code></pre>
           <p>So their we have it, hopefully a simple enough example of how to move to unobtrusive javascript. As most of this is generic and used all the time it&#8217;s far simpler that it first appears.</p>
        </div>
      </div>
      <div id='other-articles'>
        <div class='older'>
          <ul>
            <li>
              <h3>
                <a href='/2005/08/11/how-i-came-to-love-visio.html' title=''>
                  &laquo; How i came to love visio
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2005/08/02/fluid-flash-v01.html' title=''>
                  &laquo; fluid flash v0.1
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2005/07/31/new-designs-with-added-width.html' title=''>
                  &laquo; new designs with added width
                </a>
              </h3>
            </li>
          </ul>
        </div>
        <div class='newer'>
          <ul>
            <li>
              <h3>
                <a href='/2005/08/21/the-state-of-newcastle.html' title=''>
                  The State of Newcastle &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2005/08/25/the-greatness-of-online-tutorials.html' title=''>
                  the greatness of online tutorials &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2005/08/29/a-typo-on-this-site.html' title=''>
                  A Typo? On this site? &raquo;
                </a>
              </h3>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='comments'>
        <div id='disqus_thread'></div>
        <script src='http://disqus.com/forums/morethanseven/embed.js' type='text/javascript'></script>
        <noscript>
          <a href='http://disqus.com/forums/morethanseven/?url=ref'>
            View the discussion thread
          </a>
        </noscript>
      </div>
      <!-- / disqus adds too much visual crap -->
      <style type='text/css'>
        .dsq-dc-logo {
          display: none !important; }
      </style>
      <div class='clear'></div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        (function() {
          var links = document.getElementsByTagName('a');
          var query = '?';
          for(var i = 0; i < links.length; i++) {
            if(links[i].href.indexOf('#disqus_thread') >= 0) {
              query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
            }
          }
          document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/morethanseven/get_num_replies.js' + query + '"></' + 'script>');
        })();
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        try {
          var pageTracker = _gat._getTracker("UA-435455-1");
          pageTracker._setDomainName(".morethanseven.net");
          pageTracker._setAllowHash(false);
          pageTracker._trackPageview();
          pageTracker._trackPageLoadTime();
        } catch(err) {}
      //]]>
    </script>
  </body>
</html>
