<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>JSON configuration example - Printing</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='' name='keywords' />
    <link href='/assets/css/reset.css' rel='stylesheet' type='text/css' />
    <link href='/assets/css/style.css' media='screen' rel='stylesheet' type='text/css' />
    <link href='/assets/css/code.css' rel='stylesheet' type='text/css' />
  </head>
  <body>
    <div id='main'>
      <div id='header'>
        <div class='logo'>
          <a href='/'>&laquo; morethanseven</a>
        </div>
        <div id='nav'>
          <ul>
            <li><a href='/about.html'>about</a></li>
            <li><a href='/archives.html'>archives</a></li>
            <li><a href='/tags.html'>tags</a></li>
            <li>
              <a href='/atom.xml'>rss</a>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='article'>
        <h1>
          JSON configuration example - Printing
        </h1>
        <div class='meta'>
          <ul class='tags'>
            <li>Jun 02, 2007</li>
            <li>&middot;</li>
          </ul>
        </div>
        <div class='body'>
          <p>As a quick follow up to my <a href="http://morethanseven.net/posts/unobtrusive-javascript-example-printing/">previous post on unobtrusive javascript</a> I thought I&#8217;d expand it even more, but this time in an attempt to make it easier to use.</p>
          <p>As we&#8217;ve already mentioned javascript should be treated like any other programming language &#8211; not necessarily left to the experts but their should ideally be an expert involved somewhere along the line. One way of doing this is to abstract out configuration from programmatic logic. This massively helps with code resuse as well, leaving everyone to play to their strengths. It&#8217;s interesting to note that even programmers who would always store configuration settings seperately when writing <span class="caps">PHP</span> or Rails applications don&#8217;t always get around to doing the same in Javascript. Hell, I used to be one of them until <a href="http://wait-till-i.com/">Chris Heilmann</a> pointed out how patently obvious the solution was while at <a href="http://thehighlandfling.com/2007/">The Highland Fling</a>.</p>
          <p>The answer is <a href="http://www.json.org/"><span class="caps">JSON</span></a>. I think it&#8217;s nearly always easier with a quick example so here&#8217;s the Print snippet from the previous post but this time with a few configurable options:</p>
          <pre><code>var Print = {&#x000A;   config: {&#x000A;      "id": "iNav",&#x000A;      "classname": "has-print",&#x000A;      "text": "Print"&#x000A;   },&#x000A;   init: new domFunction(function() {&#x000A;      if (list = document.getElementById(Print.config.id)) {&#x000A;         if (list.nodeName.toLowerCase() === 'ul') {&#x000A;            if (Print.hasClass(list,Print.config.classname)) {&#x000A;               var item = document.createElement("li");&#x000A;               item.className = "print";&#x000A;               var link = document.createElement("a");&#x000A;               link.href = "#";&#x000A;               link.onclick = Print.printpage;&#x000A;               var txt = document.createTextNode(Print.config.text);&#x000A;               link.appendChild(txt);&#x000A;               item.appendChild(link);&#x000A;               list.appendChild(item);&#x000A;            }&#x000A;         }&#x000A;      }&#x000A;   }),&#x000A;   hasClass: function(element,cName) { &#x000A;      return new RegExp('\\b''&amp;#43;cName'&amp;#43;'\\b').test(element.className);&#x000A;   },&#x000A;   printpage: function() {&#x000A;      window.print();&#x000A;      return false;&#x000A;   }&#x000A;}</code></pre>
          <p>The main thing we have done is to add a new block:</p>
          <pre><code>config: {&#x000A;   "id": "iNav",&#x000A;   "classname": "has-print",&#x000A;   "text": "brand new text"&#x000A;},</code></pre>
          <p>This is simply a <span class="caps">JSON</span> object of name/value pairs. You can easily alter the right hand values and change the workings of the app. You then reference the settings in  the rest of you&#8217;re code using dot notation:</p>
          <pre><code>Print.config.text</code></pre>
          <p>In the above example our configuration directives are stored in our Print object. Depending on the circumstances of use you might find it easier to have a seperate Config object which stores all the configuration settings for the entire site.</p>
        </div>
      </div>
      <div id='other-articles'>
        <div class='older'>
          <ul>
            <li>
              <h3>
                <a href='/2007/05/29/unobtrusive_javascript_example_printing.html' title=''>
                  &laquo; Unobtrusive Javascript Example - Printing
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2007/05/18/some_good_news.html' title=''>
                  &laquo; Some good news
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2007/05/07/cssxx.html' title=''>
                  &laquo; CSSx.x
                </a>
              </h3>
            </li>
          </ul>
        </div>
        <div class='newer'>
          <ul>
            <li>
              <h3>
                <a href='/2007/06/11/introducing_hedgehog_lab.html' title=''>
                  Introducing hedgehog lab &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2007/06/22/encoded_characters_in_css3_generated_content.html' title=''>
                  Encoded Characters in CSS3 Generated Content &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2007/06/24/targeting_on_css3.html' title=''>
                  Target(ing) on CSS3 &raquo;
                </a>
              </h3>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='clear'></div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        try {
          var pageTracker = _gat._getTracker("UA-435455-1");
          pageTracker._setDomainName(".morethanseven.net");
          pageTracker._setAllowHash(false);
          pageTracker._trackPageview();
        } catch(err) {}
      //]]>
    </script>
  </body>
</html>
