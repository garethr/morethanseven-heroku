<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>Archiving Twitter data with Python</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='python, twitter' name='keywords' />
    <meta content='etkmKMftqAyYJM6-DP_TTKJjV0EHM5vbVcaOloSo8Z8' name='google-site-verification' />
    <link href='/assets/css/reset.css' rel='stylesheet' type='text/css' />
    <link href='/assets/css/style.css' media='screen' rel='stylesheet' type='text/css' />
    <link href='/assets/css/code.css' rel='stylesheet' type='text/css' />
    <link href='http://www.myopenid.com/server' rel='openid.server' />
    <link href='http://garethr.myopenid.com/' rel='openid.delegate' />
    <link href='/articles.atom' rel='alternate' title='Morethanseven Atom Feed' type='application/atom+xml' />
  </head>
  <body>
    <div id='main'>
      <div id='header'>
        <div class='logo'>
          <a href='/'>&laquo; morethanseven</a>
        </div>
        <div id='carbonads-container'>
          <div class='carbonad'>
            <div id='carbon'></div>
            <script type='text/javascript'>
              //<![CDATA[
                var z = document.createElement("script");
                z.type = "text/javascript";
                z.async = true;
                z.src = "http://engine.carbonads.com/z/12119/carbon_2_1_0_HORIZ";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(z, s);
              //]]>
            </script>
          </div>
        </div>
        <div id='nav'>
          <ul>
            <li><a href='/about.html'>about</a></li>
            <li><a href='/archives.html'>archives</a></li>
            <li><a href='/tags.html'>tags</a></li>
            <li>
              <a href='/articles.atom'>rss</a>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='article'>
        <h1>
          Archiving Twitter data with Python
        </h1>
        <div class='meta'>
          <ul class='tags'>
            <li>Nov 23, 2007</li>
            <li>
              &middot;
            </li>
            <li>
              <a href='/2007/11/23/archiving-twitter-data-with-python.html#disqus_thread'></a>
            </li>
            <li>&middot;</li>
            <li>
              <a class='tag' href='/tags/python/'>
                python
              </a>
            </li>
            <li>
              <a class='tag' href='/tags/twitter/'>
                twitter
              </a>
            </li>
          </ul>
        </div>
        <div class='body'>
          <p><a href="http://www.al3x.net/">Alex</a> from <a href="http://twitter.com">Twitter</a> just got round to adding the ability to export your entire archive of tweets via the <a href="http://groups.google.com/group/twitter-development-talk/web/api-documentation"><span class="caps">API</span></a>. A few people on the mailing list had been asking for this for a while so good to see it get released.</p>
          <p>I couldn&#8217;t resist knocking together a very quick and simple Python script to go off and get all your tweets, presented here for anyone else to play around with. Note that simple, fast and works on my machine were watchwords here. Don&#8217;t expect fancy parameters, much error handling or artificial intelligence.</p>
          <pre><code><span class="kw">import</span> <span class="ic">urllib2</span>&#x000A;username = <span class="s"><span class="dl">'</span><span class="k">&lt;YOUR USERNAME&gt;</span><span class="dl">'</span></span>&#x000A;password = <span class="s"><span class="dl">'</span><span class="k">&lt;YOUR PASSWORD&gt;</span><span class="dl">'</span></span>&#x000A;format = <span class="s"><span class="dl">'</span><span class="k">json</span><span class="dl">'</span></span> <span class="c"># json or xml</span>&#x000A;filename = <span class="s"><span class="dl">'</span><span class="k">archive.json</span><span class="dl">'</span></span> <span class="c"># filename of the archive</span>&#x000A;tweets = <span class="i">164</span> <span class="c"># number of tweets</span>&#x000A;pages = (<span class="pd">int</span>(<span class="pd">float</span>(tweets)/<span class="pd">float</span>(<span class="i">80</span>)))+<span class="i">1</span>&#x000A;auth = urllib2.HTTPPasswordMgrWithDefaultRealm()&#x000A;auth.add_password(<span class="pc">None</span>, <span class="s"><span class="dl">'</span><span class="k">http://twitter.com/account/</span><span class="dl">'</span></span>, username, password)&#x000A;authHandler = urllib2.HTTPBasicAuthHandler(auth)&#x000A;opener = urllib2.build_opener(authHandler)&#x000A;urllib2.install_opener(opener) &#x000A;i = <span class="i">1</span>&#x000A;response = <span class="s"><span class="dl">'</span><span class="dl">'</span></span>&#x000A;<span class="kw">print</span> <span class="s"><span class="dl">'</span><span class="k">Downloading tweets. Note that this may take some time</span><span class="dl">'</span></span>&#x000A;<span class="kw">while</span> i &lt;= pages:&#x000A;    request = urllib2.Request(<span class="s"><span class="dl">'</span><span class="k">http://twitter.com/statuses/user_timeline/account.</span><span class="dl">'</span></span> \&#x000A;    + format + <span class="s"><span class="dl">'</span><span class="k">?page=</span><span class="dl">'</span></span> + <span class="pd">str</span>(i))&#x000A;    response = response + urllib2.urlopen(request).read()&#x000A;    i = i + <span class="i">1</span>&#x000A;handle = <span class="pd">open</span>(filename,<span class="s"><span class="dl">&quot;</span><span class="k">w</span><span class="dl">&quot;</span></span>)&#x000A;handle.write(response)&#x000A;handle.close()&#x000A;<span class="kw">print</span> <span class="s"><span class="dl">'</span><span class="k">Archived </span><span class="dl">'</span></span> + <span class="pd">str</span>(tweets) + <span class="s"><span class="dl">'</span><span class="k"> of </span><span class="dl">'</span></span> + username + \&#x000A;<span class="s"><span class="dl">'</span><span class="ch">\'</span><span class="k">s tweets to </span><span class="dl">'</span></span> + filename</code></pre>
          <p>The main thing to note here though is the ideal of <a href="http://www.dataportability.org/">data portability</a>. Let&#8217;s just say I wanted to move to Jaiku or Pownce instead of Twitter, but didn&#8217;t want to lose all that data. If I can knock up an export script in half an hour then all you need are import data <span class="caps">API</span> calls and a little more scripting.</p>
          <p>As it is, I&#8217;m more interesting in seeing what I can do with my data now I can get at it. <a href="http://suda.co.uk">Brian</a> just suggested a <a href="http://simile.mit.edu/timeline/">quick visualisation tool</a> (which already eats <span class="caps">JSON</span>) and I&#8217;d already been thinking about <a href="http://morethanseven.net/posts/pygunfog/">language analysis</a> and maybe having a look at <a href="http://www.apml.org/"><span class="caps">APML</span></a> some more. Open data is simply more fun.</p>
        </div>
      </div>
      <div id='other-articles'>
        <div class='older'>
          <ul>
            <li>
              <h3>
                <a href='/2007/11/21/should-we-just-learn-java.html' title=''>
                  &laquo; Should we just learn Java?
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2007/11/17/joost-developer-day.html' title=''>
                  &laquo; Joost Developer Day
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2007/11/12/activity.html' title=''>
                  &laquo; Activity
                </a>
              </h3>
            </li>
          </ul>
        </div>
        <div class='newer'>
          <ul>
            <li>
              <h3>
                <a href='/2007/11/30/10-thinks-you-probably-dont-do.html' title=''>
                  10 Thinks you probably don&#39;t do &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2007/12/03/debug-web-pages-with-jquery-and-jash.html' title=''>
                  Debug web pages with Jquery and Jash &raquo;
                </a>
              </h3>
            </li>
            <li>
              <h3>
                <a href='/2007/12/08/insert-dojo-and-yui-bookmarklets.html' title=''>
                  Insert Dojo and YUI bookmarklets &raquo;
                </a>
              </h3>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
      <div class='comments'>
        <div id='disqus_thread'></div>
        <script src='http://disqus.com/forums/morethanseven/embed.js' type='text/javascript'></script>
        <noscript>
          <a href='http://disqus.com/forums/morethanseven/?url=ref'>
            View the discussion thread
          </a>
        </noscript>
      </div>
      <!-- / disqus adds too much visual crap -->
      <style type='text/css'>
        .dsq-dc-logo {
          display: none !important; }
      </style>
      <div class='clear'></div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        (function() {
          var links = document.getElementsByTagName('a');
          var query = '?';
          for(var i = 0; i < links.length; i++) {
            if(links[i].href.indexOf('#disqus_thread') >= 0) {
              query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
            }
          }
          document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/morethanseven/get_num_replies.js' + query + '"></' + 'script>');
        })();
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        try {
          var pageTracker = _gat._getTracker("UA-435455-1");
          pageTracker._setDomainName(".morethanseven.net");
          pageTracker._setAllowHash(false);
          pageTracker._trackPageview();
          pageTracker._trackPageLoadTime();
        } catch(err) {}
      //]]>
    </script>
  </body>
</html>
